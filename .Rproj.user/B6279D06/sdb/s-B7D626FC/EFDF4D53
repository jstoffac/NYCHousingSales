{
    "collab_server" : "",
    "contents" : "---\ntitle: \"ManhattanSalesAnalysis\"\nauthor: \"Oscar Padilla\"\ndate: \"June 6, 2016\"\noutput: \n  html_document:\n    keep_md: true\n---\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(cache=TRUE)\nknitr::opts_chunk$set(echo = TRUE)\n```\n#MANHATTAN HOUSING DATA ANALYSIS\n\n*CODE Extracted from: O'Neil, Cathy; Schutt, Rachel (2013-10-09). Doing Data Science: Straight Talk from the Frontline*\n\nIt requires the packages gdata and plyr\n\n```{r}\nrequire(plyr)\nrequire(gdata)\nlibrary(plyr)\nlibrary(gdata)\n```\n\nNow we will be reading the Excel file downloaded from [The Official Website of the City of New York](http://www1.nyc.gov/home/search/index.page?search-terms=Rolling+sales+update)\n\n```{r}\nmanhattansales <- read.xls(\"Data/rollingsales_manhattan.xls\", pattern =\"BOROUGH\")\nstr(manhattansales)\n```\n\n##Data Cleansing\n\nClean and format the data with regular expressions\n\n```{r}\n#convert variable SALE.PRICE from factor into numeric and get rid off of leading digits\nmanhattansales$SALE.PRICE.N <- as.numeric(gsub(\"[^[:digit:]]\",\"\", manhattansales$SALE.PRICE))\n#make all variable names lower case\nnames(manhattansales) <- tolower(names(manhattansales))\n#convert other numeric variables, as well as, date variables\nmanhattansales $ gross.sqft <- as.numeric(gsub(\"[^[:digit:]]\",\"\", manhattansales $ gross.square.feet))\nmanhattansales$land.sqft <- as.numeric(gsub(\"[^[:digit:]]\",\"\", manhattansales $ land.square.feet))\nmanhattansales$sale.date <- as.Date(manhattansales$sale.date)\nmanhattansales$year.built <- as.numeric(as.character(manhattansales$year.built))\nstr(manhattansales)\n```\n\n##Data Selection\n\nKeep only the actual sales (*manhattansales.sale) and family homes ONLY\n\n```{r}\nmanhattansales.sale <- manhattansales[manhattansales$sale.price.n!=0,]\nmanhattansales.homes <- manhattansales.sale[which(grepl(\"FAMILY\", manhattansales.sale$building.class.category)),]\nsummary(manhattansales.homes)\n```\n\nOut of a total of `r nrow(manhattansales)` of the original file, only `r nrow(manhattansales.homes)` are actual sales and family homes\n\n##Outliers Elimination\n\nRemove outliers that seem like they weren't actual sales\n\n```{r}\nmanhattansales.homes$outliers <- (log10(manhattansales.homes$sale.price.n) <=5) + 0\nmanhattansales.homes <- manhattansales.homes[which(manhattansales.homes$outliers == 0),]\n```\n\nBy eliminating log10(sales.price.n) <= 5 we end up with `r nrow(manhattansales.homes)` rows\n\nFinally, let's plot the relation between sales price vs. square footage\n\n```{r}\nplot(manhattansales.homes$gross.sqft, manhattansales.homes$sale.price.n)\n#Logarithmic Scale\nplot(log10(manhattansales.homes$gross.sqft),log10(manhattansales.homes$sale.price.n))\n```",
    "created" : 1465191624024.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1733898943",
    "id" : "EFDF4D53",
    "lastKnownWriteTime" : 1465267868,
    "last_content_update" : 1465267868,
    "path" : "~/Documents/MSDS6306/Unit4/OPadillaNYCHousingSales/ManhattanSalesDataAnalysis.Rmd",
    "project_path" : "ManhattanSalesDataAnalysis.Rmd",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}